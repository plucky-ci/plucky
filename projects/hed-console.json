{
	"name": "hed-console",
	"type": "generator",
	"imports": {
		"plucky-shell": "plucky-shell",
		"plucky-git": "plucky-git",
		"plucky-jenkins": "plucky-jenkins",
		"plucky-cache":"plucky-cache",
		"plucky-console-version":"plucky-console-version"
	},
	"localConfig": {
		"jenkins": {
			"url": "http://hed-console.prsn.io",
			"auth": {
				"type": "userpass",
				"userpass": {
					"user": "admin",
					"pass": "very_secret"
				}
			}
		}
	},
	"modules": {
		"release": {
			"dev": {
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "dev-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			},
			"qa":{
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "qa-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			},
			"stg": {
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "stg-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			},
			"prd": {
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "prd-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			}
		},
		"imageList": {
			"process": [{
				"task":"plucky-console-version.GetVersion",
				"params":{
					"file":"./currentversions.json"
				}
			}]
		},
		"health":[
			{
				"name":"dev",
				"url": "https://console-dev.pearsoned.com/health"
			},
			{
				"name":"qa",
				"url": "https://console-qa.stg-openclass.com/health"
			},
			{
				"name":"stg",
				"url": "https://console-stg.pearson.com/health"
			},
			{
				"name":"prd",
				"url": "https://console.pearson.com/health"
			}
		],
		"build": {
			"process": [{
				"task": "plucky-git",
				"params": {
					"repository": "git@bitbucket.org:pearson-techops/hed-console.git",
					"folder":"repositories/hed-console"
				}
			}, {
				"task": "plucky-git",
				"params": {
					"repository": "ssh://git@bitbucket.pearson.com/occ/console-server.git",
					"folder":"repositories/console-server"
				}
			}, {
				"task": "plucky-git",
				"params": {
					"repository": "ssh://git@bitbucket.pearson.com/occ/console-ui.git",
					"folder":"repositories/console-ui"
				}
			}, {
				"task": "plucky-shell",
				"params": {
					"execFile": true,
					"command":"./createBuild.sh",
					"cwd": "./repositories/hed-console/",
					"arguments": ["pull", "${web.version}"]
				}
			}, {
				"task": "plucky-cache.set",
				"params": {
					"key":"version"
				}
			}, {
				"task": "plucky-jenkins.ExecuteJob",
				"params": { 
					"url": "${localConfig.jenkins.url}", 
					"auth": "${localConfig.jenkins.auth}",
					"jobName": "seed-job"
				}
			}, {
				"task": "plucky-jenkins.ExecuteJob",
				"params": { 
					"url": "${localConfig.jenkins.url}", 
					"auth": "${localConfig.jenkins.auth}",
					"jobName": "console-ui"
				}
			}, {
				"task": "plucky-jenkins.ExecuteJob",
				"params": { 
					"url": "${localConfig.jenkins.url}", 
					"auth": "${localConfig.jenkins.auth}",
					"jobName": "console-server"
				}
			}, {
				"task": "plucky-jenkins.ExecuteJob",
				"params": { 
					"url": "${localConfig.jenkins.url}", 
					"auth": "${localConfig.jenkins.auth}",
					"jobName": "console-docker-image"
				}
			}, {
				"task": "plucky-cache.get",
				"params": {
					"getKeys":["version"]
				}
			}, {
				"task":"plucky-console-version.SaveVersion",
				"params":{
					"file":"./currentversions.json"
				}
			}]
		}
	}
}