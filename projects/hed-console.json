{
	"name": "hed-console",
	"type": "generator",
	"imports": {
		"plucky-shell": "plucky-shell",
		"plucky-git": "plucky-git",
		"plucky-jenkins": "plucky-jenkins",
		"plucky-bitesize-pipeline":"plucky-bitesize-pipeline"
	},
	"localConfig": {
		"jenkins": {
			"url": "http://hed-console.prsn.io",
			"auth": {
				"type": "userpass",
				"userpass": {
					"user": "admin",
					"pass": "very_secret"
				}
			}
		}
	},
	"modules": {
		"environments": [
			{
				"name":"dev",
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "dev-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			},
			{
				"name":"qa",
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "qa-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			},
			{
				"name":"stg",
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "stg-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			},
			{
				"name":"prd",
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "dev-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			}
		],
		"health":[
			{
				"name":"dev",
				"process":[]
			},
			{
				"name":"qa",
				"process":[]
			},
			{
				"name":"stg",
				"process":[]
			},
			{
				"name":"prd",
				"process":[]
			}
		],
		"build": {
			"process": [{
				"task": "plucky-git",
				"params": {
					"repository": "git@bitbucket.org:pearson-techops/hed-console.git",
					"folder":"repositories/hed-console"
				}
			}, {
				"task": "plucky-git",
				"params": {
					"repository": "ssh://git@bitbucket.pearson.com/occ/console-server.git",
					"folder":"repositories/console-server"
				}
			}, {
				"task": "plucky-git",
				"params": {
					"repository": "ssh://git@bitbucket.pearson.com/occ/console-ui.git",
					"folder":"repositories/console-ui"
				}
			}, {
				"task": "plucky-shell",
				"params": {
					"execFile": true,
					"command":"./createBuild.sh",
					"cwd": "./repositories/hed-console/",
					"arguments": ["pull", "${web.version}"]
				}
			}, {
				"task": "plucky-jenkins.ExecuteJob",
				"params": { 
					"url": "${localConfig.jenkins.url}", 
					"auth": "${localConfig.jenkins.auth}",
					"jobName": "seed-job"
				}
			}, {
				"task": "plucky-jenkins.ExecuteJob",
				"params": { 
					"url": "${localConfig.jenkins.url}", 
					"auth": "${localConfig.jenkins.auth}",
					"jobName": "console-ui"
				}
			}, {
				"task": "plucky-jenkins.ExecuteJob",
				"params": { 
					"url": "${localConfig.jenkins.url}", 
					"auth": "${localConfig.jenkins.auth}",
					"jobName": "console-server"
				}
			}, {
				"task": "plucky-jenkins.ExecuteJob",
				"params": { 
					"url": "${localConfig.jenkins.url}", 
					"auth": "${localConfig.jenkins.auth}",
					"jobName": "console-docker-image"
				}
			}]
		}
	}
}