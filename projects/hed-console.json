{
	"name": "hed-console",
	"type": "generator",
	"imports": {
		"plucky-shell": "plucky-shell",
		"plucky-git": "plucky-git",
		"plucky-jenkins": "plucky-jenkins",
		"plucky-cache":"plucky-cache",
		"plucky-console-version":"plucky-console-version"
	},
	"localConfig": {
		"jenkins": {
			"url": "http://hed-console.prsn.io",
			"auth": {
				"type": "userpass",
				"userpass": {
					"user": "admin",
					"pass": "very_secret"
				}
			}
		}
	},
	"modules": {
		"environments": [
			{
				"name":"dev",
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "dev-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			},
			{
				"name":"qa",
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "qa-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			},
			{
				"name":"stg",
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "stg-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			},
			{
				"name":"prd",
				"process":[{
					"task": "plucky-jenkins.ExecuteJob",
					"params": { 
						"url": "${localConfig.jenkins.url}", 
						"auth": "${localConfig.jenkins.auth}",
						"jobName": "prd-deploy",
						"console_VERSION":"${web.releaseVersion}"
					}
				}]
			}
		],
		"releaseList": {
			"process": [{
				"task":"plucky-console-version.GetVersion",
				"params":{
					"file":"./currentversions.json"
				}
			}]
		},
		"health":[
			{
				"name":"dev",
				"process":[]
			},
			{
				"name":"qa",
				"process":[]
			},
			{
				"name":"stg",
				"process":[]
			},
			{
				"name":"prd",
				"process":[]
			}
		],
		"build": {
			"process": [{
				"task": "plucky-shell",
				"params": {
					"execFile": true,
					"command":"./createBuild.sh",
					"cwd": "./repositories/hed-console/",
					"arguments": ["pull", "${web.version}"]
				}
			}, {
				"task": "plucky-cache.set",
				"params": {
					"key":"version"
				}
			}, {
				"task": "plucky-cache.get",
				"params": {
					"getKeys":["version"]
				}
			}, {
				"task":"plucky-console-version.SaveVersion",
				"params":{
					"file":"./currentversions.json"
				}
			}]
		}
	}
}